mov eax,dword ptr ss:[esp+4]
push ebx
lea ebx,dword ptr ds:[eax-1]
test bx,bx
jl stronghold map pnger.407E4E
mov eax,dword ptr ss:[esp+C]
push ebp
mov ebp,dword ptr ss:[esp+14]
push esi
movsx esi,bx
push edi
mov edi,dword ptr ss:[esp+20]
add esi,eax
sub ebp,eax
mov cl,byte ptr ds:[esi]
xor eax,eax
mov al,byte ptr ds:[esi+ebp]
mov edx,1
shl edx,cl
mov ecx,eax
add eax,edx
and ecx,FFFF
cmp ax,100
mov byte ptr ds:[ecx+edi],bl
jb stronghold map pnger.407E31
dec ebx
dec esi
test bx,bx
jge stronghold map pnger.407E23
pop edi
pop esi
pop ebp
pop ebx
ret